import { createUnionType, Field, ObjectType } from '@nestjs/graphql';
import { StatusType } from '../../../share/app/status.type';

@ObjectType('<%= aggregate.name.value %>')
export class <%= className %> {
  <%_ properties.forEach(function(e){ _%>
  <%_ if (firstPropertie !== e.propertie.name.value) { _%>

  <%_ } _%>
  @Field()
  <%= e.propertie.name.value %>: <%= e.primitive %>;
  <%_ }); _%>
}

export const <%= classResultPersist %> = createUnionType({
  name: '<%= classResultPersist %>',
  types: () => [<%= className %>, StatusType],
  resolveType(value) {
    if (value.status) {
      return StatusType;
    }
    return <%= className %>;
  },
});
