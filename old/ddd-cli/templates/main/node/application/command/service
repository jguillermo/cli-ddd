import {
  BadRequestException,
  Injectable,
  NotFoundException,
} from '@nestjs/common';

@Injectable()
export class ConfirmCourierService {
  constructor(private repository: StoreFireStoreRepository) {}

  public async confirm(storeId: string, courierId: string): Promise<void> {
    const store = await this.repository.findById(storeId);
    if (!store) {
      throw new NotFoundException(`store with id ${storeId} not found`);
    }

    store.toConfirmCourier(courierId);
    await this.repository.persist(store);
  }
}
